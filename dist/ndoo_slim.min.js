(function(){"use strict";var _n;this.ndoo||(this.N=this.ndoo||(this.ndoo={}),_n=this.ndoo,_n._isDebug=0,_n.event=function(name,type){return type+":"+name},function(e){null==e&&(e=_n.event),e.TYPE_ON=1,e.TYPE_TRIGGER=2,e.inited=!1,e._temp=[],e.on=function(eventName,callback){this._temp.push({type:this.TYPE_ON,eventName:eventName,callback:callback})},e.trigger=function(eventName,eventType,data){this._temp.push({type:this.TYPE_TRIGGER,eventName:eventName,eventType:eventType,data:data})},e.off=function(){}}(),_n.on=function(eventName,callback){var i$,len$,name,results$=[];for(eventName=eventName.split(/\s*,\s*|\s+/),i$=0,len$=eventName.length;len$>i$;++i$)name=eventName[i$],results$.push(this.event.on(name,callback));return results$},_n.trigger=function(eventName){var data,res$,i$,to$,_index,type,name;for(res$=[],i$=1,to$=arguments.length;to$>i$;++i$)res$.push(arguments[i$]);return data=res$,_index=eventName.indexOf(":"),type=eventName.substring(0,_index++),type||(type="DEFAULT"),name=eventName.substring(_index),this.event.trigger(name,type,data)},_n.off=function(eventName){var i$,len$,name,results$=[];for(eventName=eventName.split(/\s*,\s*|\s+/),i$=0,len$=eventName.length;len$>i$;++i$)name=eventName[i$],results$.push(this.event.off(name));return results$},_n.vars||(_n.vars={}),_n.func||(_n.func={}),_n._lib||(_n._lib={}))}).call(this),function(){"use strict";var _,_n,_lib,$;_=this._,this.N=this.ndoo||(this.ndoo={}),_n=this.ndoo,_lib=_n._lib,$=this.jQuery||this.Zepto,_.extend(_lib,{onready:function(callback){$?$(callback):window.addEventListener&&document.addEventListener("DOMContentLoaded",callback,!1)},onload:function(callback){$?$(window).on("load",callback):window.addEventListener&&addEventListener("load",callback,!1)},querySelector:function(selector){return $?$(selector).slice(0):document.querySelectorAll?document.querySelectorAll(selector):void 0},data:function(elem,key,value){return elem.dataset||(key=key.replace(/([A-Z])/g,function(char){return"-"+char.toLowerCase()})),2===arguments.length?elem.dataset?elem.dataset[key]:elem.getAttribute(key):3===arguments.length?elem.dataset?elem.dataset[key]=value:elem.setAttribute(key,value):void 0}})}.call(this),function(){"use strict";var _,_n,_vars,_func,_lib,_stor;_=this._,this.N=this.ndoo||(this.ndoo={}),_n=this.ndoo,_vars=_n.vars,_func=_n.func,_lib=_n._lib,!_n._lib.Events&&this.Backbone&&(_n._lib.Events=this.Backbone),_n.storage=function(key,value,option){var destroy,rewrite,data;return destroy=option&_n.storage.DESTROY,rewrite=option&_n.storage.REWRITE,data=_n.storage._data,void 0===value?data[key]:destroy?(delete data[key],!0):!rewrite&&_.has(data,key)?!1:(data[key]=value,data[key])},_stor=_n.storage,_n.storage._data={},_n.storage.REWRITE=1,_n.storage.DESTROY=2,_n.require=function(depend,callback,type){"do"===type.toLowerCase()?Do.apply(null,depend.concat(callback)):"seajs"===type.toLowerCase()&&seajs.use(depend,callback)},_n._blockData||(_n._blockData={_block:{},_app:{},_service:{},_exist:{}}),_n._block=function(base,namespace,name,block){var data,nsArr,temp,i$,len$,ns,result,success;if("block"!==base&&"app"!==base&&"service"!==base)return!1;if(data=_n._blockData["_"+base],nsArr=namespace?namespace.replace(/^[\/.]|[\/.]$/g,"").split(/[\/.]/):[],temp=data,block||arguments.length>3){for(i$=0,len$=nsArr.length;len$>i$;++i$)ns=nsArr[i$],temp=temp[ns]||(temp[ns]={});return!block||"app"!==base&&"block"!==base?"service"===base?(result=temp[name]=block,success=!0):result=!1:result="object"==typeof block?"app"===base&&temp[name]?_.defaults(temp[name],block):temp[name]=block:"function"==typeof block?temp[name]=block:!1,(result||success)&&(namespace?_n._blockData._exist[base+"."+namespace+"."+name]=!0:_n._blockData._exist[base+"."+name]=!0),result}for(i$=0,len$=nsArr.length;len$>i$;++i$){if(ns=nsArr[i$],!_.has(temp,ns))return void 0;temp=temp[ns]}return temp[name]},_n.hasApp=function(namespace){return _n._blockData._exist["app."+namespace]},_n.setApp=function(namespace){return _n._blockData._exist["app."+namespace]=!0},_n.app=function(namespace,controller){var nsmatch,controllerName,ref$;return(nsmatch=namespace.match(/(.*?)(?:[\/.]([^\/.]+))$/))?(namespace=nsmatch[1],controllerName=nsmatch[2]):(ref$=[namespace,null],controllerName=ref$[0],namespace=ref$[1]),arguments.length>1?_n._block("app",namespace,controllerName,controller):_n._block("app",namespace,controllerName)},_n.trigger("STATUS:NAPP_DEFINE"),_n.event=_.extend(_n.event,{eventHandle:_.extend({events:{},listened:{}},_n._lib.Events),on:function(eventName,callback){var eventHandle,i$,ref$,len$,item;if(eventHandle=this.eventHandle,eventHandle.on(eventName,callback),eventHandle.listened[eventName]=!0,_.has(eventHandle.events,"STATUS:"+eventName)&&callback.apply(eventHandle,eventHandle.events["STATUS:"+eventName]),_.has(eventHandle.events,eventName))for(i$=0,len$=(ref$=eventHandle.events[eventName]).length;len$>i$;++i$)item=ref$[i$],callback.apply(eventHandle,item)},off:function(eventName){var eventHandle;eventHandle=this.eventHandle,eventHandle.off(eventName),delete eventHandle.listened[eventName],delete eventHandle.events[eventName]},trigger:function(eventName,eventType,data){var eventHandle;eventHandle=this.eventHandle,"DEFAULT"===eventType?eventHandle.trigger.apply(eventHandle,[eventName].concat(data)):"DELAY"===eventType?(_.has(eventHandle.listened,eventName)&&eventHandle.trigger.apply(eventHandle,[eventName].concat(data)),_.has(eventHandle.events,eventName)||(eventHandle.events[eventName]=[]),eventHandle.events[eventName].push(data)):"STATUS"===eventType&&(_.has(eventHandle.events,eventType+":"+eventName)||(eventHandle.events[eventType+":"+eventName]=data,_.has(eventHandle.listened,eventName)&&eventHandle.trigger.apply(eventHandle,[eventName].concat(data))))},init:function(){var i$,ref$,len$,item;if(!this.inited)for(i$=0,len$=(ref$=this._temp).length;len$>i$;++i$)item=ref$[i$],item.type===this.TYPE_ON?this.on(item.eventName,item.callback):item.type===this.TYPE_TRIGGER&&this.trigger(item.eventName,item.eventType,item.data);this.inited=!0}}),_n.event.init(),_.extend(_n,{pageId:"",initPageId:function(id){var el;this.pageId||("undefined"!=typeof document&&(el=document.getElementById(id||"scriptArea"))&&(this.pageId=el.getAttribute("data-page-id")||""),!this.pageId&&id&&(this.pageId=id))},getPk:function(){var _pk;return _pk=+new Date,function(prefix){return null==prefix&&(prefix=""),prefix+ ++_pk}}(),router:{parse:function(route,url,callback){var routeMatch;routeMatch=route.exec(url),null!==routeMatch&&callback.apply(null,routeMatch.slice(1))}},dispatch:function(){var filterHaldner,this$=this;filterHaldner=function(type,controller,actionName,params){var data,_data,i$,len$,dataItem,_filter,isRun,_only,_except,j$,len1$,filter,key$;if("before"===type?data=controller.before:"after"===type&&(data=controller.after),data)for("object"==typeof data&&(_data=[].concat(data)),i$=0,len$=_data.length;len$>i$;++i$)if(dataItem=_data[i$],_filter=dataItem.filter,_.isArray(_filter)||(_filter=[].concat(_filter.split(/\s*,\s*|\s+/))),isRun=!0,dataItem.only?(_only=dataItem.only,_.isArray(_only)||(_only=[].concat(_only.split(/\s*,\s*|\s+/))),_.indexOf(_only,actionName)<0&&(isRun=!1)):dataItem.except&&(_except=dataItem.except,_.isArray(_except)||(_except=[].concat(_except.split(/\s*,\s*|\s+/))),_.indexOf(_except,actionName)>-1&&(isRun=!1)),isRun)for(j$=0,len1$=_filter.length;len1$>j$;++j$)filter=_filter[j$],"function"==typeof controller[key$=filter+"Filter"]&&controller[key$](actionName,params)},this.on("NAPP_ACTION_BEFORE",function(){var params,res$,i$,to$;for(res$=[],i$=0,to$=arguments.length;to$>i$;++i$)res$.push(arguments[i$]);return params=res$,filterHaldner.apply(null,["before"].concat(params))}),this.on("NAPP_ACTION_AFTER",function(){var params,res$,i$,to$;for(res$=[],i$=0,to$=arguments.length;to$>i$;++i$)res$.push(arguments[i$]);return params=res$,filterHaldner.apply(null,["after"].concat(params))}),this.on("NAPP_LOADED",function(namespace,controllerName,actionName,params){var controller,depend,filterPrefix,run;controller=_n.app(namespace?namespace+"."+controllerName:controllerName),!_.has(controller,actionName+"Action")&&_.has(controller,"_emptyAction")&&(actionName="_empty"),depend=[],controller.depend&&(depend=depend.concat(controller.depend)),controller[actionName+"Depend"]&&(depend=depend.concat(controller[actionName+"Depend"])),filterPrefix=controllerName,namespace&&(filterPrefix=(namespace+"."+controllerName).replace(/\./g,"_")),filterPrefix=filterPrefix.toUpperCase(),run=function(){var key$;actionName&&(_n.trigger("NAPP_ACTION_BEFORE",controller,actionName,params),_n.trigger("NAPP_"+filterPrefix+"_ACTION_BEFORE",controller,actionName,params),"function"==typeof controller[key$=actionName+"Before"]&&controller[key$](params),"function"==typeof controller[key$=actionName+"Action"]&&controller[key$](params),"function"==typeof controller[key$=actionName+"After"]&&controller[key$](params),_n.trigger("NAPP_"+filterPrefix+"_ACTION_AFTER",controller,actionName,params),_n.trigger("NAPP_ACTION_AFTER",controller,actionName,params)),_n.trigger("STATUS:NBLOCK_INIT")},depend.length?_n.require(_.uniq(depend),run,"Do"):run()}),this.on("PAGE_STATUS_ROUTING",function(data){this$.router.parse(/^(?:\/?)(.*?)(?:\/?([^\/?#]+))(?:\?(.*?))?(?:\#(.*?))?$/,data,function(controller,action,params){var nsmatch,namespace,pkg;(nsmatch=controller.match(/(.*?)(?:[\/.]([^\/.]+))$/))?(namespace=nsmatch[1],controller=nsmatch[2]):namespace=void 0,namespace?(namespace=namespace.replace(/\//g,"."),pkg=namespace+"."+controller):pkg=controller,_n.app(pkg)?this$.trigger("NAPP_LOADED",namespace,controller,action,params):_n.hasApp(pkg)?this$.require([pkg+""],function(){_n.trigger("NAPP_LOADED",namespace,controller,action,params)},"Do"):this$.trigger("STATUS:NBLOCK_INIT")})})},triggerPageStatus:function(depend){var call,this$=this;call=function(){this$.trigger("STATUS:PAGE_STATUS_FAST"),_lib.onready(function(){this$.trigger("STATUS:PAGE_STATUS_DOMPREP"),this$.trigger("STATUS:PAGE_STATUS_DOM"),this$.trigger("STATUS:PAGE_STATUS_DOMORLOAD")}),_lib.onload(function(){return this$.trigger("STATUS:PAGE_STATUS_LOAD")}),this$.on("PAGE_STATUS_DOM",function(){this$.pageId&&this$.trigger("STATUS:PAGE_STATUS_ROUTING",this$.pageId)})},depend?this.require([].concat(depend),call,"Do"):call()},init:function(id,depend){var ref$;return _.isArray(id)&&(ref$=["",id],id=ref$[0],depend=ref$[1]),this.initPageId(id),this.dispatch(),this.triggerPageStatus(depend),this}})}.call(this),function(){"use strict";var _,_n,_vars,_func,_stor,_lib;_=this._,this.N=this.ndoo||(this.ndoo={}),_n=this.ndoo,_vars=_n.vars,_func=_n.func,_stor=_n.storage,_lib=_n._lib,_n.hasBlock=function(namespace){var nsmatch,name,ref$;return(nsmatch=namespace.match(/(.*?)(?:[\/.]([^\/.]+))$/))?(namespace=nsmatch[1],name=nsmatch[2]):(ref$=["_default",namespace],namespace=ref$[0],name=ref$[1]),_n._blockData._exist["block."+namespace+"."+name]},_n.setBlock=function(namespace){var nsmatch,name,ref$;return(nsmatch=namespace.match(/(.*?)(?:[\/.]([^\/.]+))$/))?(namespace=nsmatch[1],name=nsmatch[2]):(ref$=["_default",namespace],namespace=ref$[0],name=ref$[1]),_n._blockData._exist["block."+namespace+"."+name]=!0},_n.block=function(namespace,block){var nsmatch,name,ref$;return(nsmatch=namespace.match(/(.*?)(?:[\/.]([^\/.]+))$/))?(namespace=nsmatch[1],name=nsmatch[2]):(ref$=["_default",namespace],namespace=ref$[0],name=ref$[1]),arguments.length>1?_n._block("block",namespace,name,block):_n._block("block",namespace,name)},_n.trigger("STATUS:NBLOCK_DEFINE"),_n.on("NBLOCK_LOADED",function(elem,namespace,name,params){var block,call;if(null==namespace&&(namespace="_default"),block=_n.block(namespace+"."+name)){if(_.isFunction(block.init))return call=function(){block.init(elem,params)},block.depend?_n.require([].concat(block.depend),call,"Do"):call();if(_.isFunction(block))return block(elem,params)}}),_n.initBlock=function(elem){var blockId,_call;blockId=_lib.data(elem,"nblockId"),blockId=blockId.split(/\s*,\s*|\s+/),_call=function(blockId){var this$=this;return this.router.parse(/^(?:\/?)(.*?)(?:\/?([^\/?#]+))(?:\?(.*?))?(?:\#(.*?))?$/,blockId,function(namespace,block,params){var pkg;null==namespace&&(namespace="_default"),namespace=namespace.replace(/\//g,"."),pkg=namespace+"."+block,this$.block(pkg)?this$.trigger("NBLOCK_LOADED",elem,namespace,block,params):_n.hasBlock(pkg)&&this$.require([namespace+"."+block],function(){_n.trigger("NBLOCK_LOADED",elem,namespace,block,params)},"Do")})},_.each(blockId,function(id){return _call.call(_n,id)})},_n.on("NBLOCK_INIT",function(){var blockEl,blocks,i$,len$,el,auto,level,item,block;if(blockEl=_lib.querySelector("[data-nblock-id]"),blockEl&&blockEl.length){for(blocks=[],i$=0,len$=blockEl.length;len$>i$;++i$)el=blockEl[i$],auto=_lib.data(el,"nblockAuto"),level=parseInt(_lib.data(el,"nblockLevel"))||5,blocks.push([level,auto,el]);for(blocks.sort(function(block1,block2){return block1[0]>block2[0]}),i$=0,len$=blocks.length;len$>i$;++i$)item=blocks[i$],auto=item[1],block=item[2],(void 0===auto||"false"!==auto.toString())&&_n.initBlock(block)}})}.call(this),function(){"use strict";var _,$,_n,_vars,_func,_stor;_=this._,$=this.jQuery||this.Zepto,this.N=this.ndoo||(this.ndoo={}),_n=this.ndoo,_vars=_n.vars,_func=_n.func,_stor=_n.storage,_n.service=function(namespace,service){var nsmatch,name,ref$;return(nsmatch=namespace.match(/(.*?)(?:[\/.]([^\/.]+))$/))?(namespace=nsmatch[1],name=nsmatch[2]):(ref$=["_default",namespace],namespace=ref$[0],name=ref$[1]),arguments.length>1?_n._block("service",namespace,name,service):(service=_n._block("service",namespace,name),service&&_.isFunction(service.init)?service.init(_n):service)},_n.trigger("STATUS:NSERVICE_DEFINE")}.call(this);